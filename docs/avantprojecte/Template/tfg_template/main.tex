% Plantilla LaTeX per a la redacció de Treballs de Fi de Grau (TFG)
% Autor: Eloi Egea Rada
%
% © 2025, Eloi Egea Rada
% Aquesta obra està sota una llicència Creative Commons Atribució-NoComercial-CompartirIgual 4.0 Internacional (CC BY-NC-SA 4.0). https://creativecommons.org/licenses/by-nc-sa/4.0/
% Plantilla per als Treballs de Final de Grau del Centre Universitari TecnoCampus. Fent referencia a la plantilla original d'Aitor Juanola.

\documentclass[a4paper, twoside, 12pt, openright]{report} % 'openright' assegura que cada capítol comença en una plana senar

% ============================================================================
% PREÀMBUL — Paquets i Configuració
% ============================================================================

\usepackage[utf8]{inputenc} % Codificació UTF-8
\usepackage{verbatim} % Comentaris multilínea
\usepackage{graphicx} % Per insertar imatges
\usepackage{float} % Posicionament d'imatges

\usepackage[english]{babel} % Idioma del document
\usepackage{csquotes}  % Recomanat per biblatex amb babel/english
\usepackage{hyperref}

\usepackage{fancyhdr} % Per personalitzar capçaleres i peus de pàgina
\usepackage{etoolbox} % Per canviar estils de numeració
\usepackage{geometry} % Per ajustar marges
%\usepackage{emptypage} % Per evitar capçaleres/peus a pàgines en blanc
\usepackage{hyperref} % Afegeix glossari a la taula de continguts
\usepackage{setspace} % Per ajustar l'interlineat
\usepackage{titlesec} % Paquet per personalitzar els títols
\usepackage{times} % Paquet per fonts Times New Roman
\usepackage[nottoc, numbib]{tocbibind} % Inclou bibliografia i índexs automàticament al ToC
\usepackage[nonumberlist, toc]{glossaries} % Paquet per a la generació del glossari
\usepackage[style=ieee, backend=biber]{biblatex} % Paquet per gestionar la bibliografia en format IEEE
\addbibresource{resources/references.bib} % El fitxer .bib amb les referències

% Carregar les definicions del glossari des d'un fitxer extern
% El fitxer real està a `docs/avantprojecte/Template/tfg_template/resources/glossary.tex` — usem una ruta relativa des de la plantilla
\input{resources/glossary.tex}

% Aplicar l'estil personalitzat
\setglossarystyle{altlist}
\setacronymstyle{long-short}

\makeglossaries
% Reduir espai abans i després de cada capítol
\titleformat{\chapter}[block]{\normalfont\fontsize{18pt}{0pt}\bfseries}{\thechapter}{1em}{}
\titlespacing*{\chapter}{0pt}{0pt}{\baselineskip}

\titleformat{\section}[block]{\normalfont\fontsize{16pt}{0pt}\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}[block]{\normalfont\fontsize{14pt}{0pt}\bfseries}{\thesubsection}{1em}{}

% Configuració de hiperenllaços
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=magenta,      
    urlcolor=blue,
    pdftitle={Pentesting ètic en entorns virtualitzats amb EVE-NG},
    pdfauthor={Eloi Egea Rada},
    pdfpagemode=FullScreen
}

% Configuració dels marges
\geometry{top=3cm, bottom=2.54cm, left=3cm, right=2.54cm, bindingoffset=0.46cm}

\setlength{\headheight}{14.5pt} % Augmentar l'altura de la capçalera

\setlength{\parindent}{0pt} % Desactiva el sagnat dels paràgrafs

% Imatges
\graphicspath{{images/}}

% ============================================================================
% PORTADA I PRELIMINARS
% ============================================================================

% Configuració de capçaleres i peus de pàgina preliminars
\fancypagestyle{plain}{
    \fancyhf{} % Esborrem configuracions prèvies
    \fancyhead[RO,LE]{\fontsize{10}{12}\textit{\thepage}}
    \fancyhead[RE]{\fontsize{10}{12}\textit{Pentesting ètic en entorns virtualitzats amb EVE-NG}}
    \fancyfoot{}
}
\pagestyle{plain}

\title{
        \begin{figure}
            \centering
            \includegraphics[width=0.85\linewidth]{images/logo-tecnocampus.png}
        \end{figure}
        
        \fontsize{14pt}{0pt}\textbf{Grau en Enginyeria Informàtica de Gestió i Sistemes d'Informació} \\
        
        \vspace*{3cm}

        \textbf{Pentesting ètic en entorns virtualitzats amb EVE-NG} \\

        \vspace*{1.5cm}

        \textbf{Memòria}

        \vspace*{5cm}
}
\author{
\fontsize{14pt}{0pt}
\textbf{Eloi Egea Rada} \\
\textbf{Tutor: Pere Vidiella i Catalan}
}
\date{Gener 2026}

\fontsize{12pt}{0pt}
\begin{document}

% === PORTADA ===
\maketitle

\newpage
\thispagestyle{empty} % Pàgina en blanc sense capçalera ni peu
\null
\newpage

% ============================================================================
% ÍNDEXS I GLOSSARI
% ============================================================================

% Estils dels índexs i numeració en xifres romanes
\pagenumbering{Roman} % Índexs comencen amb números romans

\tableofcontents


% Portada o altres planes sense numeració
%\listoffigures

%\listoftables

% Definir interlineat de 1,5 espais i espaiat anterior de 12pt
\onehalfspacing % Interlineat de 1,5
\setlength{\parskip}{12pt} % Espaiat anterior als paràgrafs

\printglossary


\begin{comment}
*****************************************************************************
*                           IMPORTANT!!!                                    *
*   Les següents dues comandes (\newpage, \null) estàn destinades a crear   *
*   una pàgina buida, això és degut a que en realitzar el canvi de          *
*   numeració (de romana a aràbiga), en crear un nou \chapter, no detecta   *
*   automàticament si la última pàgina es parell o imparell, per tant, un   *
*   cop acabat el glossari, cal comprovar si acaba en pàgina parell o       *
*   imparell, en aquest últim cas, cal afegir manualment una pàgina         *
*   en blanc, doncs sino es pot donar el cas que el glossari acabi en       *
*   la pàgina IX, i la següent pàgina sigui la 1, tractades les dues com    *
*   imparells.                                                              *
*****************************************************************************
\end{comment}
\newpage % Afegir nova pàgina, només en cas que el glossari acabi en pàgina imparell
\null
\newpage % Comença una nova pàgina per assegurar que la numeració sigui consistent
% Configuració de capçaleres i peus de pàgina principals
\fancypagestyle{plain}{
    \fancyhf{} % Esborrem configuracions prèvies
    \fancyhead[RO,LE]{\fontsize{10}{12}\textit{\thepage}}
    \fancyhead[LO]{\fontsize{10}{12}\textit{\nouppercase{\textit{\leftmark}}}}
    \fancyhead[RE]{\fontsize{10}{12}\textit{Pentesting ètic en entorns virtualitzats amb EVE-NG - TFG}}
    \fancyfoot{}
}
\pagestyle{plain}
% Canvi a numeració aràbiga per al cos principal del document
\pagenumbering{arabic} % Comença numeració aràbiga


% ============================================================================
% COS PRINCIPAL DEL DOCUMENT
% ============================================================================


\chapter{Introducció i Context}

\section{Motivació i Justificació}

El pentesting ètic és una disciplina fonamental en la ciberseguretat moderna. Aquest TFG 
es dedica a desenvolupar laboratoris pràctics virtualitzats que permeten als estudiants 
adquirir competències pràctiques en pentesting mitjançant escenaris realistes i controlats 
dins de la plataforma EVE-NG.

\section{Estructura de la Memòria}

La present memòria es divideix en els següents capítols:

\begin{enumerate}
    \item \textbf{Dedicatoria}: A qui va dirigit el treball, agraïments i reflexió personal.
    \item \textbf{Introducció i Context}: Motivació i estructura general.
    \item \textbf{Objecte del TFG}: Descripció detallada del projecte.
    \item \textbf{Estat de l'Art}: Revisió bibliogràfica i plataformes existents.
    \item \textbf{Objectius i Abast}: Objectius específics amb KPIs mesurables.
    \item \textbf{Metodologia}: Procés de realització i desenvolupament.
    \item \textbf{Requeriments}: Requeriments tècnics i funcionals.
    \item \textbf{Estudi de Viabilitat}: Análisis de viabilitat tècnica i econòmica.
    \item \textbf{Resultats i Conclusions}: Lliurables i conclusions.
\end{enumerate}

\newpage
% ============================================================================ç
% CAPÍTOL 1: DEDICATÒRIA
% ============================================================================

\input{chapters/dedicatoria}

% ============================================================================
% CAPÍTOL 2: OBJECTE DEL TFG
% ============================================================================

\input{chapters/01_objecte}

% ============================================================================
% CAPÍTOL 3: ESTAT DE L'ART
% ============================================================================

\input{chapters/02_estat_art}

% ============================================================================
% CAPÍTOL 4: OBJECTIUS I ABAST
% ============================================================================

\input{chapters/03_objectius}

% ============================================================================
% CAPÍTOL 5: METODOLOGIA
% ============================================================================

\input{chapters/04_metodologia}

% ============================================================================
% CAPÍTOL 6: REQUERIMENTS
% ============================================================================

\input{chapters/05_requeriments}

% ============================================================================
% CAPÍTOL 7: ESTUDI DE VIABILITAT
% ============================================================================

\input{chapters/06_viabilitat}

% ============================================================================
% CAPÍTOL 8: DESENVOLUPAMENT I IMPLEMENTACIÓ (PLACEHOLDER)
% ============================================================================

\chapter{Desenvolupament i Implementació}

\section{Arquitectura General}

\textit{En aquesta secció es descriurà l'arquitectura dels laboratoris, la configuració 
de les xarxes virtuals, i la implementació de les topologies EVE-NG.}

\section{Laboratori 1: Reconeixement i Enumeració}

\subsection{Objectius de Laboratori}

\begin{itemize}
    \item Familiarització amb eines de scanning (nmap, Nessus)
    \item Enumeració de serveis i vulnerabilitats
    \item Documentació de descobriments
\end{itemize}

\subsection{Topologia de Xarxa}

\textit{Diagrama de la xarxa i màquines virtuals que componen aquest laboratori.}

\section{Laboratori 2: Vulnerabilitats d'Aplicacions Web}

\subsection{OWASP Top 10}

\textit{Exploració de les vulnerabilitats més crítiques segons OWASP.}

\section{Laboratori 3: Anàlisi de Tràfic i Criptografia}

\textit{Anàlisi de comunicacions de xarxa amb Wireshark i tècniques de criptografia.}

\section{Laboratori 4: Escalada de Privilegis}

\textit{Tècniques d'escalada de privilegis a sistemes Unix i Windows.}

% ============================================================================
% CAPÍTOL 9: RESULTATS I CONCLUSIONS
% ============================================================================

\chapter{Resultats i Conclusions}

\section{Lliurables Entregats}

\begin{itemize}
    \item 4 topologies EVE-NG funcionals (.unl)
    \item 8-12 imatges de màquines virtuals optimitzades
    \item Scripts d'automatització per a desplegament
    \item Documentació tècnica completa per laboratori
    \item Guies pràctiques per a estudiants
\end{itemize}

\section{Conclusions}

El desenvolupament d'aquests laboratoris proporciona una base sòlida per a la formació 
en pentesting ètic dins del Grau en Enginyeria Informàtica.

\section{Recomanacions per a Treballs Futurs}

\begin{itemize}
    \item Integració amb altres plataformes educatives (Moodle)
    \item Ampliació amb laboratoris d'IoT i xarxes 5G
    \item Automatització de correccions i qualificacions
\end{itemize}

% ============================================================================
% ANEXOS
% ============================================================================

\appendix

\chapter{Annexo A: Infraestructura de Build LaTeX Reproducible}

\section{Configuració de Docker i TeX Live}

La memòria del present TFG s'ha desenvolupat usant una infraestructura de build reproducible 
basada en TeX Live 2023, latexmk i Docker Compose. Aquesta aproximació garanteix que tots 
els artefactes (PDF, índexs, glosaris) es generin de manera consistent.

\subsection{Hores Invertides en Infraestructura}

\begin{table}[H]
    \centering
    \begin{tabular}{|l|l|r|}
    \hline
    \textbf{Tasca} & \textbf{Descripció} & \textbf{Hores} \\
    \hline
    TeX Live + Docker & Setup de compilació & 2.5h \\
    latexmk + .latexmkrc & Build automatitzat & 1.5h \\
    Estructura modular (chapters/) & Organització de capítols & 3.5h \\
    Validació i testing & Compilació final & 0.5h \\
    \hline
    \textbf{SUBTOTAL} & & \textbf{8.0h} \\
    \hline
    \end{tabular}
\end{table}

\chapter{Annexo B: Infraestructura de Laboratori (Homelab)}

\section{Especificacions del Homelab}

\begin{table}[H]
    \centering
    \begin{tabular}{|l|l|r|}
    \hline
    \textbf{Component} & \textbf{Especificació} & \textbf{Hores Setup} \\
    \hline
    Host VMware/Hyper-V & CPU 8-core, RAM 32GB, SSD 500GB & 3.0h \\
    EVE-NG & Simulador de xarxes corporatiu & 4.0h \\
    Kali Linux x3 & Màquines de pentesting & 2.5h \\
    Windows Server & Sistema objectiu & 1.5h \\
    Xarxes virtuals & 3 VLANS, DMZ, backend & 2.0h \\
    \hline
    \textbf{SUBTOTAL} & & \textbf{13.0h} \\
    \hline
    \end{tabular}
\end{table}

\chapter{Annexo C: Control de Hores Total}

\begin{table}[H]
    \centering
    \begin{tabular}{|l|r|r|}
    \hline
    \textbf{Activitat} & \textbf{Hores} & \textbf{Percentatge} \\
    \hline
    Infraestructura LaTeX & 8.0h & 6\% \\
    Infraestructura Homelab & 13.0h & 10\% \\
    Investigació i Disseny & 20.0h & 15\% \\
    Implementació de Laboratoris & 50.0h & 37\% \\
    Documentació & 25.0h & 19\% \\
    Testing i Validació & 15.0h & 11\% \\
    Gestió de Projecte & 5.0h & 4\% \\
    \hline
    \textbf{TOTAL ESTIMAT} & \textbf{136.0h} & \textbf{100\%} \\
    \hline
    \end{tabular}
\end{table}

% ============================================================================
% BIBLIOGRAFIA
% ============================================================================

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{Bibliografia}
\printbibliography




\begin{comment}

\chapter{Nom capítol}

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

\section{Nom secció}

Això és un exemple de referència al glossari: \gls{api_rest}.

\subsection{Nom subsecció}

Això és un exemple de referència bibliogràfica: \cite{tcm_web_presentation}.
Això és un altre exemple de referència bibliogràfica: \cite{smith2019}.
\chapter{Figures i taules}

\section{Exemple figura}

\begin{figure}[H]
    \centering
    \includegraphics[width=1\linewidth]{images/logo-tecnocampus.png}
    \caption{Logo Tecnocampus}
    \label{fig:logo-tecnocampus}
\end{figure}

Això és un exemple de com citar una figura: \ref{fig:logo-tecnocampus}.

\section{Exemple taula}


\begin{table}[H]
    \centering
    \begin{tabular}{ccc}
        A & B & C\\
        D & E & F\\
        G & H & I\\
    \end{tabular}
    \caption{Exemple taula}
    \label{tab:my-table}
\end{table}

Això és un exemple de com citar una taula: \ref{tab:my-table}


\cleardoublepage % Garanteix que la bibliografia comenci en una pàgina imparell
\phantomsection % Marca la pàgina correcta per a la taula de continguts
\addcontentsline{toc}{chapter}{Bibliografia} % Afegeix la bibliografia al ToC
\printbibliography % Imprimeix la bibliografia

\end{document}

\end{comment}

\end{document}